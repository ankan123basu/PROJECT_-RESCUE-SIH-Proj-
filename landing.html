<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RESCUE - Agency Coordination System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0f172a;
            background-image: 
                radial-gradient(at 47% 33%, hsl(162, 77%, 40%, 0.15) 0, transparent 59%), 
                radial-gradient(at 82% 65%, hsl(218, 39%, 11%, 0.3) 0, transparent 55%);
        }
        
        .hero-gradient {
            background: linear-gradient(90deg, rgba(15, 23, 42, 0.8) 0%, rgba(15, 23, 42, 0.4) 100%);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .btn-glow {
            position: relative;
            z-index: 1;
            overflow: hidden;
        }
        
        .btn-glow::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.1) 100%
            );
            transform: rotate(30deg);
            z-index: -1;
            transition: transform 0.5s ease;
        }
        
        .btn-glow:hover::after {
            transform: rotate(30deg) translate(10%, 10%);
        }
        
        .feature-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .parallax-bg {
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            background-image: url('assets/images/360_F_921959394_Nywfa9yVtxSryJqLezbO9vnaHo7zsBco.jpg');
        }
        
        /* Animation keyframes */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .animate-fade-in {
            animation: fadeIn 1.5s ease-out forwards;
        }
        
        .animate-slide-up {
            animation: slideUp 1s ease-out forwards;
        }
        
        .animate-pulse {
            animation: pulse 2s infinite;
        }
        
        /* Chat widget styles */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .chat-button {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.35), 0 0 8px 2px rgba(59, 130, 246, 0.5);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: pulse-glow 2s infinite ease-in-out, float 3s infinite ease-in-out;
        }
        
        .chat-button::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 70%);
            z-index: 1;
        }
        
        .chat-button::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0) 60%);
            z-index: 1;
        }
        
        .chat-button i {
            position: relative;
            z-index: 2;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));
            animation: blink 3s infinite;
            font-size: 1.75rem;
        }
        
        .chat-container {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: rgba(31, 41, 55, 0.95);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: all 0.3s ease;
            transform-origin: bottom right;
        }
        
        .chat-header {
            padding: 15px 20px;
            background: rgba(30, 58, 138, 0.5);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .user-message, .bot-message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 18px;
            word-break: break-word;
        }
        
        .user-message {
            align-self: flex-end;
            background: #3b82f6;
            color: white;
            border-bottom-right-radius: 5px;
        }
        
        .bot-message {
            align-self: flex-start;
            background: rgba(75, 85, 99, 0.7);
            color: white;
            border-bottom-left-radius: 5px;
        }
        
        .bot-typing {
            display: flex;
            gap: 4px;
            padding: 10px 15px;
            align-self: flex-start;
            background: rgba(75, 85, 99, 0.7);
            color: white;
            border-radius: 18px;
            border-bottom-left-radius: 5px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            opacity: 0.7;
            animation: typingAnimation 1.4s infinite both;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typingAnimation {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-4px);
            }
        }
        
        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .chat-input input {
            flex: 1;
            background: rgba(55, 65, 81, 0.7);
            border: 1px solid rgba(75, 85, 99, 0.7);
            border-radius: 20px;
            padding: 10px 15px;
            outline: none;
            color: white;
        }
        
        .chat-input button {
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }
        
        .chat-input button:hover {
            background: #2563eb;
        }
        
        .hidden {
            display: none;
        }
        
        .scale-out {
            transform: scale(0);
        }
        
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 8px 2px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 12px 4px rgba(59, 130, 246, 0.7); }
            100% { box-shadow: 0 0 8px 2px rgba(59, 130, 246, 0.5); }
        }
        
        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <div class="relative min-h-screen flex items-center">
        <div class="absolute inset-0 z-0">
            <img src="assets/images/wmremove-transformed.jpeg" alt="Emergency Response Team" class="w-full h-full object-cover">
            <div class="absolute inset-0 hero-gradient"></div>
        </div>
        
        <div class="container mx-auto px-6 relative z-10">
            <nav class="flex justify-between items-center py-6">
                <div class="flex items-center">
                    <img src="assets/images/DeWatermark.ai_1744543533742.png" alt="RESCUE Logo" class="h-12 mr-2">
                    <span class="text-3xl font-bold text-white">RESCUE</span>
                </div>
                <div class="hidden md:flex space-x-10">
                    <a href="#features" class="text-gray-300 hover:text-white transition-colors">Features</a>
                    <a href="#about" class="text-gray-300 hover:text-white transition-colors">About</a>
                    <a href="#contact" class="text-gray-300 hover:text-white transition-colors">Contact</a>
                </div>
                <div class="flex space-x-4">
                    <a href="index.html" class="px-6 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-all">Login</a>
                    <a href="register.html" class="px-6 py-2 rounded-lg border border-white text-white hover:bg-white hover:text-blue-900 transition-all">Register</a>
                </div>
            </nav>
            
            <div class="flex flex-col md:flex-row items-center justify-between mt-20 mb-32">
                <div class="md:w-1/2 mb-10 md:mb-0">
                    <h1 class="text-4xl md:text-6xl font-bold text-white leading-tight mb-6">
                        Coordinating <span class="text-blue-400">Emergency Response</span> Agencies
                    </h1>
                    <p class="text-xl text-gray-300 mb-8">
                        A unified platform for emergency response coordination, resource management, and agency networking.
                    </p>
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                        <a href="index.html" class="btn-glow px-8 py-4 rounded-lg bg-gradient-to-r from-blue-600 to-blue-800 text-white text-center font-medium hover:from-blue-700 hover:to-blue-900 transition-all">
                            Get Started
                        </a>
                        <a href="#features" class="px-8 py-4 rounded-lg border border-gray-400 text-white text-center font-medium hover:bg-white hover:text-blue-900 transition-all">
                            Learn More
                        </a>
                    </div>
                </div>
                <div class="md:w-1/2 flex justify-center">
                    <div class="glass-card rounded-xl p-1 w-full max-w-md">
                        <img src="assets/images/illustration-search-rescue-through-building-rubble-after_756405-39693.avif" alt="Emergency Response Dashboard" class="rounded-lg w-full">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Features Section -->
    <div id="features" class="py-20 bg-gray-900">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-white mb-4">Key Features</h2>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto">
                    Our platform provides essential tools for emergency response coordination and agency management.
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <!-- Feature 1 -->
                <a href="agency-network.html" class="glass-card rounded-xl p-8 transform transition-all hover:scale-105">
                    <div class="feature-icon bg-blue-600 text-white">
                        <i class="fas fa-network-wired text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-3">Agency Network</h3>
                    <p class="text-gray-400">
                        Connect with other emergency response agencies to coordinate efforts and share resources during critical situations.
                    </p>
                </a>
                
                <!-- Feature 2 -->
                <a href="agency-dashboard.html" class="glass-card rounded-xl p-8 transform transition-all hover:scale-105">
                    <div class="feature-icon bg-green-600 text-white">
                        <i class="fas fa-tachometer-alt text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-3">Agency Dashboard</h3>
                    <p class="text-gray-400">
                        Monitor your agency's status, resources, and activities with a comprehensive dashboard providing real-time insights.
                    </p>
                </a>
                
                <!-- Feature 3 -->
                <a href="emergency-coordination.html" class="glass-card rounded-xl p-8 transform transition-all hover:scale-105">
                    <div class="feature-icon bg-red-600 text-white">
                        <i class="fas fa-exclamation-triangle text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-3">Emergency Coordination</h3>
                    <p class="text-gray-400">
                        Efficiently manage emergency situations with real-time coordination tools, resource allocation, and status tracking.
                    </p>
                </a>
            </div>
        </div>
    </div>
    
    <!-- About Section -->
    <div id="about" class="py-20 bg-gray-800">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-10 md:mb-0">
                    <h2 class="text-4xl font-bold text-white mb-6">About RESCUE</h2>
                    <p class="text-xl text-gray-300 mb-6">
                        RESCUE is a comprehensive platform designed to facilitate coordination between emergency response agencies during crisis situations.
                    </p>
                    <p class="text-gray-400 mb-6">
                        Our system enables agencies to connect, share resources, and coordinate their efforts efficiently. With real-time updates and a user-friendly interface, RESCUE helps save lives by improving emergency response times and resource allocation.
                    </p>
                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <h4 class="text-2xl font-bold text-blue-400 mb-2">10+</h4>
                            <p class="text-gray-400">Agencies Connected</p>
                        </div>
                        <div>
                            <h4 class="text-2xl font-bold text-blue-400 mb-2">500+</h4>
                            <p class="text-gray-400">Emergencies Coordinated</p>
                        </div>
                        <div>
                            <h4 class="text-2xl font-bold text-blue-400 mb-2">24/7</h4>
                            <p class="text-gray-400">Support Available</p>
                        </div>
                        <div>
                            <h4 class="text-2xl font-bold text-blue-400 mb-2">98%</h4>
                            <p class="text-gray-400">Satisfaction Rate</p>
                        </div>
                    </div>
                </div>
                <div class="md:w-1/2 flex justify-center">
                    <div class="glass-card rounded-xl p-1 w-full max-w-md">
                        <img src="assets/images/rescuer-background-with-accident-safety-symbols-flat-vector-illustration_1284-81632.avif" alt="Team Collaboration" class="rounded-lg w-full">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Testimonial Section -->
    <div class="py-20 parallax-bg">
        <div class="container mx-auto px-6">
            <div class="max-w-4xl mx-auto glass-card rounded-xl p-10 text-center">
                <i class="fas fa-quote-left text-4xl text-blue-400 mb-6"></i>
                <p class="text-2xl text-white mb-8">
                    "RESCUE has transformed how our every department coordinates with other agencies during emergencies. The real-time updates and resource sharing capabilities have significantly improved our response times."
                </p>
                <div class="flex items-center justify-center">
                    <div class="w-16 h-16 rounded-full overflow-hidden mr-4">
                        <img src="assets/images/d3c09cde-dcda-4267-a7a0-d6b4668f08e0.jpg" alt="Ankan Basu" class="w-full h-full object-cover">
                    </div>
                    <div class="text-left">
                        <h4 class="text-white font-semibold">Ankan Basu</h4>
                        <p class="text-gray-400">Co-owner, Project Rescue</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Contact Section -->
    <div id="contact" class="py-20 bg-gray-900">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-white mb-4">Contact Us</h2>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto">
                    Have questions about RESCUE? Get in touch with our team.
                </p>
            </div>
            
            <div class="flex flex-col md:flex-row">
                <div class="md:w-1/2 mb-10 md:mb-0 md:pr-10">
                    <div class="glass-card rounded-xl p-8 h-full">
                        <h3 class="text-2xl font-semibold text-white mb-6">Get In Touch</h3>
                        <div class="space-y-6">
                            <div class="flex items-start">
                                <div class="bg-blue-600 rounded-lg p-3 mr-4">
                                    <i class="fas fa-map-marker-alt text-white"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium mb-1">Address</h4>
                                    <p class="text-gray-400">Lovely Professional University, Punjab, India</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-blue-600 rounded-lg p-3 mr-4">
                                    <i class="fas fa-envelope text-white"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium mb-1">Email</h4>
                                    <p class="text-gray-400">ankanbasu1234@gmail.com</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-blue-600 rounded-lg p-3 mr-4">
                                    <i class="fas fa-phone text-white"></i>
                                </div>
                                <div>
                                    <h4 class="text-white font-medium mb-1">Phone</h4>
                                    <p class="text-gray-400">6296441903</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="md:w-1/2">
                    <div class="glass-card rounded-xl p-8">
                        <form id="contactForm" method="post" action="./php/send_email.php">

                            <div class="mb-6">
                                <label for="name" class="block text-gray-400 mb-2">Name</label>
                                <input type="text" id="name" name="name" required class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div class="mb-6">
                                <label for="email" class="block text-gray-400 mb-2">Email</label>
                                <input type="email" id="email" name="email" required class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>
                            <div class="mb-6">
                                <label for="message" class="block text-gray-400 mb-2">Message</label>
                                <textarea id="message" name="message" rows="4" required class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                            </div>
                            <button type="submit" class="w-full btn-glow px-6 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-blue-800 text-white font-medium hover:from-blue-700 hover:to-blue-900 transition-all">
                                Send Message
                            </button>
                            <div id="formStatus" class="mt-4 text-center hidden"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="py-10 bg-gray-800 border-t border-gray-700">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <span class="text-2xl font-bold text-white">RESCUE</span>
                    <p class="text-gray-400 mt-2">Emergency Response Coordination System</p>
                </div>
                <div class="flex space-x-6">
                    <a href="https://x.com/AnkanBasu02" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors" title="Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://www.instagram.com/ank2n10/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="https://www.linkedin.com/in/ankan-basu-595152271/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition-colors" title="LinkedIn">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-400 mb-4 md:mb-0"> 2025 RESCUE. All rights reserved.</p>
                <div class="flex space-x-8">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">Privacy Policy</a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">Terms of Service</a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>

    <div class="chat-widget">
        <button class="chat-button" aria-label="Open chat support" title="Chat with us">
            <i class="fas fa-robot text-white text-2xl"></i>
        </button>
        <div class="chat-container hidden">
            <div class="chat-header">
                <div class="flex items-center">
                    <i class="fas fa-robot text-blue-400 text-xl mr-2"></i>
                    <h3 class="text-xl font-bold text-white">RESCUE AI Assistant</h3>
                </div>
                <button class="text-white hover:text-gray-400 transition-colors" onclick="closeChat()" aria-label="Close chat" title="Close chat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chat-messages">
                <div class="bot-message">
                    <p>Hello! I'm your RESCUE assistant, How can I help you learn about our emergency coordination platform?</p>
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Type a message...">
                <button onclick="sendMessage()" aria-label="Send message" title="Send message">
                    <i class="fas fa-paper-plane text-white"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        // Contact form submission
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const statusDiv = document.getElementById('formStatus');
            const submitBtn = this.querySelector('button[type="submit"]');
            
            // Disable submit button and show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = 'Sending...';
            
            fetch('./php/send_email.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Show status message
                statusDiv.classList.remove('hidden');
                
                if (data.status === 'success') {
                    statusDiv.innerHTML = '<p class="text-green-400">' + data.message + '</p>';
                    // Reset form on success
                    document.getElementById('contactForm').reset();
                } else {
                    statusDiv.innerHTML = '<p class="text-red-400">' + data.message + '</p>';
                }
                
                // Reset button state
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Send Message';
                
                // Hide status message after 5 seconds
                setTimeout(() => {
                    statusDiv.classList.add('hidden');
                }, 5000);
            })
            .catch(error => {
                statusDiv.classList.remove('hidden');
                statusDiv.innerHTML = '<p class="text-red-400">An error occurred. Please try again later.</p>';
                
                // Reset button state
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Send Message';
            });
        });

        // Chat functionality
        const chatButton = document.querySelector('.chat-button');
        const chatContainer = document.querySelector('.chat-container');
        const chatInput = document.getElementById('chatInput');
        const chatMessages = document.querySelector('.chat-messages');
        
        // Gemini API configuration
        const GEMINI_API_KEY = 'AIzaSyBhnwj6QZ4bfb-x5pr9o0aU4myOEs-zVic'; // *** IMPORTANT: Replace with your actual API key here ***
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent';
        
        // Define context about our system for the Gemini model
        const systemContext = `
            You are an AI assistant for the RESCUE Agency Coordination System, a platform for emergency response 
            coordination, resource management, and agency networking. Your role is to provide helpful information
            about the platform's features including:
            
            1. Real-time tracking of emergency vehicles (ambulances, helicopters, fire trucks)
            2. Interactive map interfaces with dynamic markers and filtering capabilities 
            3. Incident reporting and response mechanisms with email notifications
            4. Resource management and coordination tools
            5. Agency networking for collaborative emergency response
            
            Provide concise, helpful responses about the platform. If asked about signing up,
            direct users to the registration page. For emergency assistance, remind them to
            call their local emergency number instead of using this chat.
        `;
        
        // Chat history to maintain context
        let chatHistory = [
            { role: "system", content: systemContext },
            { role: "model", content: "Hello! I'm your RESCUE assistant, powered by Gemini Flash 2.0. How can I help you learn about our emergency coordination platform?" }
        ];

        chatButton.addEventListener('click', () => {
            chatContainer.classList.toggle('hidden');
        });

        // Function to close chat
        function closeChat() {
            chatContainer.classList.add('hidden');
        }
        
        // Function to show typing indicator
        function showTypingIndicator() {
            const typingIndicator = document.createElement('div');
            typingIndicator.classList.add('bot-typing');
            typingIndicator.id = 'typingIndicator';
            
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.classList.add('typing-dot');
                typingIndicator.appendChild(dot);
            }
            
            chatMessages.appendChild(typingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Function to remove typing indicator
        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }
        
        // Function to send message to Gemini Flash 2.0 API
        async function getGeminiResponse(message) {
            try {
                // Prepare the request body
                const requestBody = {
                    contents: [
                        {
                            parts: [
                                { text: systemContext },
                                { text: message }
                            ]
                        }
                    ],
                    generationConfig: {
                        temperature: 0.7,
                        topK: 40,
                        topP: 0.95,
                        maxOutputTokens: 1024,
                    }
                };
                
                // Make API request
                const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestBody)
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('API error details:', errorData);
                    throw new Error(`API request failed with status ${response.status}: ${JSON.stringify(errorData)}`);
                }
                
                const data = await response.json();
                const botResponse = data.candidates[0].content.parts[0].text;
                
                return botResponse;
            } catch (error) {
                console.error('Error getting response from Gemini API:', error);
                return "I'm sorry, I'm having trouble connecting to my knowledge base right now. Please try again later.";
            }
        }

        // Function to handle sending message
        async function sendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                // Add user message to UI
                const userMessage = document.createElement('div');
                userMessage.classList.add('user-message');
                userMessage.innerHTML = `<p>${message}</p>`;
                chatMessages.appendChild(userMessage);
                
                // Clear input
                chatInput.value = '';
                
                // Add user message to chat history
                chatHistory.push({ role: "user", content: message });
                
                // Show typing indicator
                showTypingIndicator();
                
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                try {
                    // Get response from Gemini
                    const botResponse = await getGeminiResponse(message);
                    
                    // Remove typing indicator
                    removeTypingIndicator();
                    
                    // Add bot response to UI
                    const botMessage = document.createElement('div');
                    botMessage.classList.add('bot-message');
                    botMessage.innerHTML = `<p>${botResponse}</p>`;
                    chatMessages.appendChild(botMessage);
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                } catch (error) {
                    console.error('Error in sendMessage:', error);
                    
                    // Remove typing indicator
                    removeTypingIndicator();
                    
                    // Show error message
                    const errorMessage = document.createElement('div');
                    errorMessage.classList.add('bot-message');
                    errorMessage.innerHTML = `<p>I'm sorry, something went wrong. Please try again.</p>`;
                    chatMessages.appendChild(errorMessage);
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
            }
        }
        
        // Handle Enter key in chat input
        chatInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                sendMessage();
            }
        });
    </script>
</body>
</html>
